import unittest
from collector import PromTargetCollector
from prometheus_client import generate_latest


class TestPromTargetCollector(unittest.TestCase):

    def setUp(self):
        self.prom_target_collector = PromTargetCollector('')

    @staticmethod
    def generate_mock_html_with_down_nodes():
        return '<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <title>Prometheus Time Series Collection and Processing Server</title>\n    <script src="/static/vendor/js/jquery.min.js"></script>\n    <script src="/static/vendor/bootstrap-3.3.1/js/bootstrap.min.js"></script>\n\n    <link type="text/css" rel="stylesheet" href="/static/vendor/bootstrap-3.3.1/css/bootstrap.min.css">\n    <link type="text/css" rel="stylesheet" href="/static/css/prometheus.css">\n\n    <script>\n      var PATH_PREFIX = "";\n      $(function () {\n        $(\'[data-toggle="tooltip"]\').tooltip()\n      })\n    </script>\n\n    \n  </head>\n\n  <body>\n    <nav class="navbar navbar-inverse navbar-fixed-top">\n      <div class="container-fluid">\n        <div class="navbar-header">\n          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n            <span class="sr-only">Toggle navigation</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n          </button>\n          <a class="navbar-brand" href="/">Prometheus</a>\n        </div>\n        <div id="navbar" class="navbar-collapse collapse">\n          <ul class="nav navbar-nav navbar-left">\n            \n            \n            <li><a href="/alerts">Alerts</a></li>\n            <li><a href="/graph">Graph</a></li>\n            <li class="dropdown">\n              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Status <span class="caret"></span></a>\n              <ul class="dropdown-menu">\n                <li><a href="/status">Runtime &amp; Build Information</a></li>\n                <li><a href="/flags">Command-Line Flags</a></li>\n                <li><a href="/config">Configuration</a></li>\n                <li><a href="/rules">Rules</a></li>\n                <li><a href="/targets">Targets</a></li>\n              </ul>\n            </li>\n            <li>\n              <a href="https://prometheus.io" target="_blank">Help</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n\n    \n  <div class="container-fluid">\n    <h2 id="targets">Targets</h2>\n      <table class="table table-condensed table-bordered table-striped table-hover">\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-blackbox" href="#job-blackbox">blackbox</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://blackbox-prober-prom-o65dh-s13.marathon.mesos:9110/metrics">http://blackbox-prober-prom-o65dh-s13.marathon.mesos:9110/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;blackbox-prober-prom-o65dh-s13.marathon.mesos:9110&quot;<br>__meta_dns_name=&quot;_blackbox-prober-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;blackbox&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                2.061s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-cadvisor" href="#job-cadvisor">cadvisor</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.16.66:8080/metrics">http://172.34.16.66:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.16.66:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.16.66"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.16"</span>\n                  \n                    <span class="label label-primary">node="172.34.16.66"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m16.928s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.166.65:8080/metrics">http://172.34.166.65:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.166.65:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.166.65"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.166"</span>\n                  \n                    <span class="label label-primary">node="172.34.166.65"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m7.349s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.204.129:8080/metrics">http://172.34.204.129:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.204.129:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.204.129"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.204"</span>\n                  \n                    <span class="label label-primary">node="172.34.204.129"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m3.888s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.39.63:8080/metrics">http://172.34.39.63:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.39.63:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.39.63"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.39"</span>\n                  \n                    <span class="label label-primary">node="172.34.39.63"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m8.668s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.60.109:8080/metrics">http://172.34.60.109:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-danger state_indicator text-uppercase">\n                  down\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.60.109:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.60.109"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.60"</span>\n                  \n                    <span class="label label-primary">node="172.34.60.109"</span>\n                  \n                </span>\n              </td>\n              <td>\n                1.582s ago\n              </td>\n              <td>\n                \n                <span class="alert alert-danger state_indicator">Get http://172.34.60.109:8080/metrics: dial tcp 172.34.60.109:8080: getsockopt: connection refused</span>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.69.147:8080/metrics">http://172.34.69.147:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-danger state_indicator text-uppercase">\n                  down\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.69.147:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.69.147"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.69"</span>\n                  \n                    <span class="label label-primary">node="172.34.69.147"</span>\n                  \n                </span>\n              </td>\n              <td>\n                12.124s ago\n              </td>\n              <td>\n                \n                <span class="alert alert-danger state_indicator">Get http://172.34.69.147:8080/metrics: dial tcp 172.34.69.147:8080: getsockopt: connection refused</span>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.79.169:8080/metrics">http://172.34.79.169:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.79.169:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.79.169"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.79"</span>\n                  \n                    <span class="label label-primary">node="172.34.79.169"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m11.51s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.83.79:8080/metrics">http://172.34.83.79:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-danger state_indicator text-uppercase">\n                  down\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.83.79:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.83.79"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.83"</span>\n                  \n                    <span class="label label-primary">node="172.34.83.79"</span>\n                  \n                </span>\n              </td>\n              <td>\n                10.49s ago\n              </td>\n              <td>\n                \n                <span class="alert alert-danger state_indicator">Get http://172.34.83.79:8080/metrics: dial tcp 172.34.83.79:8080: getsockopt: connection refused</span>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.95.247:8080/metrics">http://172.34.95.247:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-danger state_indicator text-uppercase">\n                  down\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.95.247:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.95.247"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.95"</span>\n                  \n                    <span class="label label-primary">node="172.34.95.247"</span>\n                  \n                </span>\n              </td>\n              <td>\n                184ms ago\n              </td>\n              <td>\n                \n                <span class="alert alert-danger state_indicator">Get http://172.34.95.247:8080/metrics: dial tcp 172.34.95.247:8080: getsockopt: connection refused</span>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.97.49:8080/metrics">http://172.34.97.49:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-danger state_indicator text-uppercase">\n                  down\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.97.49:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.97.49"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.97"</span>\n                  \n                    <span class="label label-primary">node="172.34.97.49"</span>\n                  \n                </span>\n              </td>\n              <td>\n                9.08s ago\n              </td>\n              <td>\n                \n                <span class="alert alert-danger state_indicator">Get http://172.34.97.49:8080/metrics: dial tcp 172.34.97.49:8080: getsockopt: connection refused</span>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-chronos" href="#job-chronos">chronos</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://chronos-exporter-prom-n6wrc-s18.marathon.mesos:9044/metrics">http://chronos-exporter-prom-n6wrc-s18.marathon.mesos:9044/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;chronos-exporter-prom-n6wrc-s18.marathon.mesos:9044&quot;<br>__meta_dns_name=&quot;_chronos-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;chronos&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                3.735s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-haproxy" href="#job-haproxy">haproxy</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://1-haproxy-exporter-prom-zm6ra-s2.marathon.mesos:9101/metrics">http://1-haproxy-exporter-prom-zm6ra-s2.marathon.mesos:9101/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;1-haproxy-exporter-prom-zm6ra-s2.marathon.mesos:9101&quot;<br>__meta_dns_name=&quot;_1-haproxy-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;haproxy&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                4.067s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-marathon" href="#job-marathon">marathon</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://marathon-exporter-prom-o99ot-s13.marathon.mesos:9099/metrics">http://marathon-exporter-prom-o99ot-s13.marathon.mesos:9099/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;marathon-exporter-prom-o99ot-s13.marathon.mesos:9099&quot;<br>__meta_dns_name=&quot;_marathon-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;marathon&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m12.042s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-marathon-app" href="#job-marathon-app">marathon-app</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://marathon-app-exporter-prom-ftnnp-s17.marathon.mesos:9099/metrics">http://marathon-app-exporter-prom-ftnnp-s17.marathon.mesos:9099/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;marathon-app-exporter-prom-ftnnp-s17.marathon.mesos:9099&quot;<br>__meta_dns_name=&quot;_marathon-app-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;marathon-app&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m10.255s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-master-cadvisors" href="#job-master-cadvisors">master-cadvisors</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.200:8080/metrics">http://172.34.254.200:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-danger state_indicator text-uppercase">\n                  down\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.200:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.200"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.200"</span>\n                  \n                </span>\n              </td>\n              <td>\n                4.309s ago\n              </td>\n              <td>\n                \n                <span class="alert alert-danger state_indicator">Get http://172.34.254.200:8080/metrics: dial tcp 172.34.254.200:8080: getsockopt: connection refused</span>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.201:8080/metrics">http://172.34.254.201:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.201:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.201"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.201"</span>\n                  \n                </span>\n              </td>\n              <td>\n                30.019s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.202:8080/metrics">http://172.34.254.202:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-danger state_indicator text-uppercase">\n                  down\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.202:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.202"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.202"</span>\n                  \n                </span>\n              </td>\n              <td>\n                12.622s ago\n              </td>\n              <td>\n                \n                <span class="alert alert-danger state_indicator">Get http://172.34.254.202:8080/metrics: dial tcp 172.34.254.202:8080: getsockopt: connection refused</span>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.203:8080/metrics">http://172.34.254.203:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.203:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.203"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.203"</span>\n                  \n                </span>\n              </td>\n              <td>\n                27.837s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.204:8080/metrics">http://172.34.254.204:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.204:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.204"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.204"</span>\n                  \n                </span>\n              </td>\n              <td>\n                21.786s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-master-node-exporters" href="#job-master-node-exporters">master-node-exporters</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.200:9093/metrics">http://172.34.254.200:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-danger state_indicator text-uppercase">\n                  down\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.200:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.200"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.200"</span>\n                  \n                </span>\n              </td>\n              <td>\n                11.148s ago\n              </td>\n              <td>\n                \n                <span class="alert alert-danger state_indicator">Get http://172.34.254.200:9093/metrics: dial tcp 172.34.254.200:9093: getsockopt: connection refused</span>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.201:9093/metrics">http://172.34.254.201:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.201:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.201"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.201"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2.918s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.202:9093/metrics">http://172.34.254.202:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-danger state_indicator text-uppercase">\n                  down\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.202:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.202"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.202"</span>\n                  \n                </span>\n              </td>\n              <td>\n                8.374s ago\n              </td>\n              <td>\n                \n                <span class="alert alert-danger state_indicator">Get http://172.34.254.202:9093/metrics: dial tcp 172.34.254.202:9093: getsockopt: connection refused</span>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.203:9093/metrics">http://172.34.254.203:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.203:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.203"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.203"</span>\n                  \n                </span>\n              </td>\n              <td>\n                9.858s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.254.204:9093/metrics">http://172.34.254.204:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.254.204:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.254.204"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.254"</span>\n                  \n                    <span class="label label-primary">node="172.34.254.204"</span>\n                  \n                </span>\n              </td>\n              <td>\n                10.536s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-mesos" href="#job-mesos">mesos</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://mesos-exporter-prom-y9dg8-s17.marathon.mesos:9110/metrics">http://mesos-exporter-prom-y9dg8-s17.marathon.mesos:9110/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;mesos-exporter-prom-y9dg8-s17.marathon.mesos:9110&quot;<br>__meta_dns_name=&quot;_mesos-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;mesos&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m10.241s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-node" href="#job-node">node</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.16.66:9093/metrics">http://172.34.16.66:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.16.66:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.16.66"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.16"</span>\n                  \n                    <span class="label label-primary">node="172.34.16.66"</span>\n                  \n                </span>\n              </td>\n              <td>\n                12.356s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.166.65:9093/metrics">http://172.34.166.65:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.166.65:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.166.65"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.166"</span>\n                  \n                    <span class="label label-primary">node="172.34.166.65"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m8.299s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.204.129:9093/metrics">http://172.34.204.129:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.204.129:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.204.129"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.204"</span>\n                  \n                    <span class="label label-primary">node="172.34.204.129"</span>\n                  \n                </span>\n              </td>\n              <td>\n                11.815s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.39.63:9093/metrics">http://172.34.39.63:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.39.63:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.39.63"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.39"</span>\n                  \n                    <span class="label label-primary">node="172.34.39.63"</span>\n                  \n                </span>\n              </td>\n              <td>\n                11.329s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.60.109:9093/metrics">http://172.34.60.109:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.60.109:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.60.109"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.60"</span>\n                  \n                    <span class="label label-primary">node="172.34.60.109"</span>\n                  \n                </span>\n              </td>\n              <td>\n                7.915s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.69.147:9093/metrics">http://172.34.69.147:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.69.147:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.69.147"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.69"</span>\n                  \n                    <span class="label label-primary">node="172.34.69.147"</span>\n                  \n                </span>\n              </td>\n              <td>\n                13.434s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.79.169:9093/metrics">http://172.34.79.169:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.79.169:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.79.169"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.79"</span>\n                  \n                    <span class="label label-primary">node="172.34.79.169"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m12.626s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.83.79:9093/metrics">http://172.34.83.79:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.83.79:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.83.79"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.83"</span>\n                  \n                    <span class="label label-primary">node="172.34.83.79"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m10.364s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.95.247:9093/metrics">http://172.34.95.247:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.95.247:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.95.247"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.95"</span>\n                  \n                    <span class="label label-primary">node="172.34.95.247"</span>\n                  \n                </span>\n              </td>\n              <td>\n                15.188s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.34.97.49:9093/metrics">http://172.34.97.49:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.34.97.49:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.34.97.49"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.34.97"</span>\n                  \n                    <span class="label label-primary">node="172.34.97.49"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m10.824s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-prometheus" href="#job-prometheus">prometheus</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://server-prom.marathon.mesos:9090/metrics">http://localhost:9090/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;localhost:9090&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;prometheus&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                2h39m5.29s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-pushgateway" href="#job-pushgateway">pushgateway</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://pushgateway-prom-mjfeo-s5.marathon.mesos:9091/metrics">http://pushgateway-prom-mjfeo-s5.marathon.mesos:9091/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;pushgateway-prom-mjfeo-s5.marathon.mesos:9091&quot;<br>__meta_dns_name=&quot;_pushgateway-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;pushgateway&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                27.305s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-zookeeper" href="#job-zookeeper">zookeeper</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://zookeeper-exporter-prom-wcir6-s5.marathon.mesos:9114/metrics">http://zookeeper-exporter-prom-wcir6-s5.marathon.mesos:9114/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;zookeeper-exporter-prom-wcir6-s5.marathon.mesos:9114&quot;<br>__meta_dns_name=&quot;_zookeeper-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;zookeeper&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                10.355s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n      </table>\n  </div>\n\n  </body>\n</html>\n\n\n\n'

    @staticmethod
    def generate_mock_html_with_all_up_nodes():
        return '<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <title>Prometheus Time Series Collection and Processing Server</title>\n    <script src="/static/vendor/js/jquery.min.js"></script>\n    <script src="/static/vendor/bootstrap-3.3.1/js/bootstrap.min.js"></script>\n\n    <link type="text/css" rel="stylesheet" href="/static/vendor/bootstrap-3.3.1/css/bootstrap.min.css">\n    <link type="text/css" rel="stylesheet" href="/static/css/prometheus.css">\n\n    <script>\n      var PATH_PREFIX = "";\n      $(function () {\n        $(\'[data-toggle="tooltip"]\').tooltip()\n      })\n    </script>\n\n    \n  </head>\n\n  <body>\n    <nav class="navbar navbar-inverse navbar-fixed-top">\n      <div class="container-fluid">\n        <div class="navbar-header">\n          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n            <span class="sr-only">Toggle navigation</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n          </button>\n          <a class="navbar-brand" href="/">Prometheus</a>\n        </div>\n        <div id="navbar" class="navbar-collapse collapse">\n          <ul class="nav navbar-nav navbar-left">\n            \n            \n            <li><a href="/alerts">Alerts</a></li>\n            <li><a href="/graph">Graph</a></li>\n            <li class="dropdown">\n              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Status <span class="caret"></span></a>\n              <ul class="dropdown-menu">\n                <li><a href="/status">Runtime &amp; Build Information</a></li>\n                <li><a href="/flags">Command-Line Flags</a></li>\n                <li><a href="/config">Configuration</a></li>\n                <li><a href="/rules">Rules</a></li>\n                <li><a href="/targets">Targets</a></li>\n              </ul>\n            </li>\n            <li>\n              <a href="https://prometheus.io" target="_blank">Help</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n\n    \n  <div class="container-fluid">\n    <h2 id="targets">Targets</h2>\n      <table class="table table-condensed table-bordered table-striped table-hover">\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-blackbox" href="#job-blackbox">blackbox</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://blackbox-prober-prom-ik5pj-s2.marathon.mesos:9110/metrics">http://blackbox-prober-prom-ik5pj-s2.marathon.mesos:9110/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;blackbox-prober-prom-ik5pj-s2.marathon.mesos:9110&quot;<br>__meta_dns_name=&quot;_blackbox-prober-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;blackbox&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                9.048s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-cadvisor" href="#job-cadvisor">cadvisor</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.125.161:8080/metrics">http://172.28.125.161:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.125.161:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.125.161"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.125"</span>\n                  \n                    <span class="label label-primary">node="172.28.125.161"</span>\n                  \n                </span>\n              </td>\n              <td>\n                4.268s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.156.124:8080/metrics">http://172.28.156.124:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.156.124:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.156.124"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.156"</span>\n                  \n                    <span class="label label-primary">node="172.28.156.124"</span>\n                  \n                </span>\n              </td>\n              <td>\n                8.094s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.168.35:8080/metrics">http://172.28.168.35:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.168.35:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.168.35"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.168"</span>\n                  \n                    <span class="label label-primary">node="172.28.168.35"</span>\n                  \n                </span>\n              </td>\n              <td>\n                5.967s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.202.17:8080/metrics">http://172.28.202.17:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.202.17:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.202.17"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.202"</span>\n                  \n                    <span class="label label-primary">node="172.28.202.17"</span>\n                  \n                </span>\n              </td>\n              <td>\n                14.963s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.85.232:8080/metrics">http://172.28.85.232:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.85.232:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.85.232"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.85"</span>\n                  \n                    <span class="label label-primary">node="172.28.85.232"</span>\n                  \n                </span>\n              </td>\n              <td>\n                5.964s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.92.33:8080/metrics">http://172.28.92.33:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.92.33:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.92.33"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.92"</span>\n                  \n                    <span class="label label-primary">node="172.28.92.33"</span>\n                  \n                </span>\n              </td>\n              <td>\n                1.132s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.99.18:8080/metrics">http://172.28.99.18:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.99.18:8080&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;cadvisor&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.99.18"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.99"</span>\n                  \n                    <span class="label label-primary">node="172.28.99.18"</span>\n                  \n                </span>\n              </td>\n              <td>\n                9.798s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-chronos" href="#job-chronos">chronos</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://chronos-exporter-prom-bzkgq-s4.marathon.mesos:9044/metrics">http://chronos-exporter-prom-bzkgq-s4.marathon.mesos:9044/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;chronos-exporter-prom-bzkgq-s4.marathon.mesos:9044&quot;<br>__meta_dns_name=&quot;_chronos-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;chronos&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                8.512s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-haproxy" href="#job-haproxy">haproxy</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://1-haproxy-exporter-prom-spdjp-s2.marathon.mesos:9101/metrics">http://1-haproxy-exporter-prom-spdjp-s2.marathon.mesos:9101/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;1-haproxy-exporter-prom-spdjp-s2.marathon.mesos:9101&quot;<br>__meta_dns_name=&quot;_1-haproxy-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;haproxy&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                14.095s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-marathon" href="#job-marathon">marathon</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://marathon-exporter-prom-gimc9-s3.marathon.mesos:9099/metrics">http://marathon-exporter-prom-gimc9-s3.marathon.mesos:9099/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;marathon-exporter-prom-gimc9-s3.marathon.mesos:9099&quot;<br>__meta_dns_name=&quot;_marathon-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;marathon&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                14.46s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-marathon-app" href="#job-marathon-app">marathon-app</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://marathon-app-exporter-prom-ypiew-s5.marathon.mesos:9099/metrics">http://marathon-app-exporter-prom-ypiew-s5.marathon.mesos:9099/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;marathon-app-exporter-prom-ypiew-s5.marathon.mesos:9099&quot;<br>__meta_dns_name=&quot;_marathon-app-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;marathon-app&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                12.345s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-master-cadvisors" href="#job-master-cadvisors">master-cadvisors</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.200:8080/metrics">http://172.28.254.200:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.200:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.200"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.200"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2.584s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.201:8080/metrics">http://172.28.254.201:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.201:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.201"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.201"</span>\n                  \n                </span>\n              </td>\n              <td>\n                6.057s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.202:8080/metrics">http://172.28.254.202:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.202:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.202"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.202"</span>\n                  \n                </span>\n              </td>\n              <td>\n                14.095s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.203:8080/metrics">http://172.28.254.203:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.203:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.203"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.203"</span>\n                  \n                </span>\n              </td>\n              <td>\n                7.919s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.204:8080/metrics">http://172.28.254.204:8080/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.204:8080&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-cadvisors&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.204"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.204"</span>\n                  \n                </span>\n              </td>\n              <td>\n                8.202s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-master-node-exporters" href="#job-master-node-exporters">master-node-exporters</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.200:9093/metrics">http://172.28.254.200:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.200:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.200"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.200"</span>\n                  \n                </span>\n              </td>\n              <td>\n                4.94s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.201:9093/metrics">http://172.28.254.201:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.201:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.201"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.201"</span>\n                  \n                </span>\n              </td>\n              <td>\n                9.152s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.202:9093/metrics">http://172.28.254.202:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.202:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.202"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.202"</span>\n                  \n                </span>\n              </td>\n              <td>\n                3.964s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.203:9093/metrics">http://172.28.254.203:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.203:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.203"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.203"</span>\n                  \n                </span>\n              </td>\n              <td>\n                5.721s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.254.204:9093/metrics">http://172.28.254.204:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.254.204:9093&quot;<br>__meta_dns_name=&quot;master.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;master-node-exporters&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.254.204"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.254"</span>\n                  \n                    <span class="label label-primary">node="172.28.254.204"</span>\n                  \n                </span>\n              </td>\n              <td>\n                12.6s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-mesos" href="#job-mesos">mesos</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://mesos-exporter-prom-arhp3-s3.marathon.mesos:9110/metrics">http://mesos-exporter-prom-arhp3-s3.marathon.mesos:9110/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;mesos-exporter-prom-arhp3-s3.marathon.mesos:9110&quot;<br>__meta_dns_name=&quot;_mesos-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;mesos&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                2.313s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-node" href="#job-node">node</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.125.161:9093/metrics">http://172.28.125.161:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.125.161:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.125.161"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.125"</span>\n                  \n                    <span class="label label-primary">node="172.28.125.161"</span>\n                  \n                </span>\n              </td>\n              <td>\n                11.871s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.156.124:9093/metrics">http://172.28.156.124:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.156.124:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.156.124"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.156"</span>\n                  \n                    <span class="label label-primary">node="172.28.156.124"</span>\n                  \n                </span>\n              </td>\n              <td>\n                12.209s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.168.35:9093/metrics">http://172.28.168.35:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.168.35:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.168.35"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.168"</span>\n                  \n                    <span class="label label-primary">node="172.28.168.35"</span>\n                  \n                </span>\n              </td>\n              <td>\n                781ms ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.202.17:9093/metrics">http://172.28.202.17:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.202.17:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.202.17"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.202"</span>\n                  \n                    <span class="label label-primary">node="172.28.202.17"</span>\n                  \n                </span>\n              </td>\n              <td>\n                2.683s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.85.232:9093/metrics">http://172.28.85.232:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.85.232:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.85.232"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.85"</span>\n                  \n                    <span class="label label-primary">node="172.28.85.232"</span>\n                  \n                </span>\n              </td>\n              <td>\n                9.202s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.92.33:9093/metrics">http://172.28.92.33:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.92.33:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.92.33"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.92"</span>\n                  \n                    <span class="label label-primary">node="172.28.92.33"</span>\n                  \n                </span>\n              </td>\n              <td>\n                8.812s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n            <tr>\n              <td>\n              <a href="http://172.28.99.18:9093/metrics">http://172.28.99.18:9093/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;172.28.99.18:9093&quot;<br>__meta_dns_name=&quot;slave.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;node&quot;">\n                  \n                  \n                    <span class="label label-primary">ip="172.28.99.18"</span>\n                  \n                    <span class="label label-primary">ip_prefix="172.28.99"</span>\n                  \n                    <span class="label label-primary">node="172.28.99.18"</span>\n                  \n                </span>\n              </td>\n              <td>\n                6.57s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-prometheus" href="#job-prometheus">prometheus</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://server-prom.marathon.mesos:9090/metrics">http://localhost:9090/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;localhost:9090&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;prometheus&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                5.455s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-pushgateway" href="#job-pushgateway">pushgateway</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://pushgateway-prom-6o3ng-s5.marathon.mesos:9091/metrics">http://pushgateway-prom-6o3ng-s5.marathon.mesos:9091/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;pushgateway-prom-6o3ng-s5.marathon.mesos:9091&quot;<br>__meta_dns_name=&quot;_pushgateway-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;pushgateway&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                13.828s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n          <thead>\n            <tr><th colspan="5" class="job_header"><a id="job-zookeeper" href="#job-zookeeper">zookeeper</a></th></tr>\n            <tr>\n              <th>Endpoint</th>\n              <th>State</th>\n              <th>Labels</th>\n              <th>Last Scrape</th>\n              <th>Error</th>\n            </tr>\n          </thead>\n          <tbody>\n          \n            <tr>\n              <td>\n              <a href="http://zookeeper-exporter-prom-usc6c-s2.marathon.mesos:9114/metrics">http://zookeeper-exporter-prom-usc6c-s2.marathon.mesos:9114/metrics</a><br>\n                \n              </td>\n              <td>\n                <span class="alert alert-success state_indicator text-uppercase">\n                  up\n                </span>\n              </td>\n              <td>\n                <span class="cursor-pointer" data-toggle="tooltip" title="" data-html=true data-original-title="<b>Before relabeling:</b><br>__address__=&quot;zookeeper-exporter-prom-usc6c-s2.marathon.mesos:9114&quot;<br>__meta_dns_name=&quot;_zookeeper-exporter-prom._tcp.marathon.mesos&quot;<br>__metrics_path__=&quot;/metrics&quot;<br>__scheme__=&quot;http&quot;<br>job=&quot;zookeeper&quot;">\n                  \n                  \n                    <span class="label label-default">none</span>\n                  \n                </span>\n              </td>\n              <td>\n                7.439s ago\n              </td>\n              <td>\n                \n              </td>\n            </tr>\n          \n          </tbody>\n        \n      </table>\n  </div>\n\n  </body>\n</html>\n\n\n\n'

    def test_collect_down_nodes(self):
        # used generate_latest method for easy assert
        self.prom_target_collector.get_prom_target_html_content = self.generate_mock_html_with_down_nodes
        prom_metrics_text = generate_latest(self.prom_target_collector)
        expected_text = '''# HELP prom_target_down_count from prom_target_down_count
# TYPE prom_target_down_count gauge
prom_target_down_count 9.0
'''
        self.assertEqual(expected_text, prom_metrics_text)

    def test_collect_up_nodes(self):
        # used generate_latest method for easy assert
        self.prom_target_collector.get_prom_target_html_content = self.generate_mock_html_with_all_up_nodes
        prom_metrics_text = generate_latest(self.prom_target_collector)
        expected_text = '''# HELP prom_target_down_count from prom_target_down_count
# TYPE prom_target_down_count gauge
prom_target_down_count 0.0
'''
        self.assertEqual(expected_text, prom_metrics_text)

if __name__ == '__main__':
    unittest.main()
